# OSI 7 계층



## 요약

+ 1계층: 피지컬 레이어
  + 디지털 신호를 아날로그 신호로 변환, 혹은 반대
  + 비트단위로만 데이터 송수신 
+ 2계층: 데이터 링크 레이어
  + 같은 네트워크에 있는 여러대의 컴퓨터들이 통신하기 위함
  + 데이터의 시작과 끝에 구분하는 비트를 넣어줌
  + MAC주소
    + 주민등록번호
    + 기기 고유의 주소
    + 절대적, 바뀔 수 없음 

+ 3계층: 네트워크 레이어 
  + 수많은 네트워크 사이에서 데이터를 주고받기 위함
  + 어딘가에 있는 목적지(IP)로 데이터를 전송하기 위해 길을 찾고(routing) 데이터 전달(forwarding)
  + IP주소
    + 바뀔 수 있음
    + 네트워크 위치에 따라서 바뀜  

  + 

+ 4계층: 트랜스포트 레이어
  + 하나의 컴퓨터 안에 있는 여러개의 프로세스 중 목적에 맞는 프로세스에 알맞는 데이터를 전송하는 것 
  + 포트번호를 통해서 데이터 전달 

+ 7계층: 어플리케이션 레이어
  + TCP/IP 모델 참고 
  + 운영체제를 통한 소켓통신 




---

## 1. Physical Layer

0101010 이라는 데이터를 전송하려면 아날로그 신호로 변환해서 전선으로 전송해야 한다.

+  encoding
  + 0과 1의 나열을 아날로그 신호로 바꿔서 전선으로 흘려 보내는 것
+ decoding
  + 전선으로 들어온 아날로그 신호를 0과 1의 나열로 해석하는 것 
+ **Physical Layer**
  + **물리적으로 연결된 두대의 컴퓨터**가 0과 1의 나열을 주고받을 수 있게 하는 모듈 
  + PHY 칩, 하드웨어적으로 구성



## 2. Data-link Layer

+ 스위치
  + 컴퓨터와 컴퓨터를 연결
+ 라우터
  + 스위치와 스위치를 연결
  + e.g) 공유기 

+ 인터넷
  + 라우터와 라우터를 연결
  + 전 세계의 컴퓨터들이 계층구조로 연결되어 있는 것
    + 컴퓨터 -> 스위치 => 라우터 -> 인터넷 
  + 해저케이블을 이용하는  등 규모가 큰 라우터들을 연결해서 구성 



### 여러대의 컴퓨터가 통신하려면?

Q: 스위치는 전송된 데이터에서 어떤 데이터가 어떤 컴퓨터에서 온 것인지를 판단할 수 있을까?

A: 송신자 (보내는 컴퓨터)는 데이터의 앞/ 뒤에 특정한 비트열을 붙인다. 

*예시*

1. A에서 `1000`, B에서 `1011` , C에서`0110` 을 전송하는 상황
1. 각 컴퓨터에서는 데이터의 앞에는 `0000`, 뒤에는 `1111` 을 붙여준다 
1. 스위치는 `000 0100 0111 100001 01111 1100 000110 1111` 이렇게 전송 받아도 각각의 데이터를 추출할 수 있다. 



+ Data-link Layer
  + **같은 네트워크에 있는 여러 대의 컴퓨터들**이 데이터를 주고받기 위해서 필요한 모듈 
  + Framing
    + 전송하려는 데이터의 앞/뒤에 데이터를 붙여 데이터의 시작과 끝을 구분하도록 하는 작업 
  + 랜카드에 구현되어 있다
    + 하드웨어적으로 구현됨 



## 3. Network Layer



우리가 주소창에 `www.naver.com`  을 입력하면 DNS를 통해 네이버의 IP 주소로 변환되어 사용된다. 

이처럼 데이터를 보내고자 하는 컴퓨터의 IP 주소를 알고 있어야 네트워크 통신이 가능하다. 



+ 패킷
  + 목적지 IP 주소 + 데이터 
+ Network Layer
  + 수많은 네트워크들의 연결로 이루어지는 inter-network 속에서
  + 어딘가에 있는 목적지 컴퓨터로 데이터를 전송하기 위해 
  + IP 주소를 이용해서 길을 찾고 (**routing**)
  + 자신 다음의 라우터에게 데이터를 넘겨주는 것 (f**orwarding**)
  + <u>운영체제의 커널에 소프트웨어적으로 구성됨</u>



## 4. Transport Layer

1,2,3 레이어를 통해 데이터를 받는 수신자는 전 세계의 컴퓨터로부터 데이터를 받을 수 있다. 

Q:  컴퓨터는 네트워크를 통해 받은 데이터들을 무슨 프로세스에게 줘야할지 어떻게 알 수 있을까?

A: 

1.  먼저 데이터를 받고자 하는 프로세스들은 포트번호를 가져야 한다. 

2. **포트번호**는 **하나의 컴퓨터에서 동시에 실행되고 있는 프로세스들이 서로 겹치지 않게 가져야 하는 정수값** 

3. 데이터를 전송자는 데이터를 보낼 때 데이터를 받을 수신자 컴퓨터에 있는 프로세스의 포트번호를 붙여서 보내야 한다. 

   + 데이터 전송자는 데이터 수신자의 포트번호도 알고 있어야 한다. 

   + *사실 네이버도 www.naver.com 뒤에 :80이 생략되어져 있다. 뒤에 다른 포트번호를 입력하면 접속되지 않는다.*

     



+ Transport Layer
  + 포트번호를 사용하여
  + 목적지 컴퓨터의 최종 도착지인 **프로세스** 까지
  + 데이터가 도달하게 하는 모듈  
  + <u>운영체제의 커널에 소프트웨어적으로 구성됨</u>



## 7. Application Layer



4번 레이어와 7번 레이어 사이에 있는 5,6 레이어 (Session Layer, Presentation Layer) 는 어디갔을까? 

![OSI 7 계층이란?, OSI 7 계층을 나눈 이유](https://t1.daumcdn.net/cfile/tistory/995EFF355B74179035)



사실 현대의 인터넷은 OSI 모델이 아니라 TCP/IP 모델을 따르고 있다. 

**TCP/IP 모델**

+ OSI 모델과 마찬가지로 네트워크 시스템에 대한 모델 
+ TCP /IP Updated 모델은 
  + Application - Transport - Network - Data link - Physical 로 이루어져 있음 
  + 현재 Updated 모델을 주로 사용 



**TCP/IP 소켓 프로그래밍**

+ 운영체제의 Transport layer에서 제공하는 API를 활용해서 통신 가능한 프로그램을 만드는 것 
+ 소켓 프로그래밍만으로도 클라이언트, 서버 프로그램을 따로따로 만들어서 동작시킬 수 있음 
+ 소켓 프로그래밍을 통해서 누구나 자신만의 Application Layer 인코더와 디코더를 만들 수 있음 
  + <u>자신만의 Application Layer 프로토콜을 만들어서 사용할 수 있음</u> 
  + 대표적인 Application Layer 프로토콜 
    + **HTTP**



---

## 끝으로, OSI 7 계층을 나눈 이유



네트워크 시스템은 하나의 거대한 소프트웨어로 볼 수 있다. 

OSI 7 계층 모델은 거대한 네트워크 소프트웨어 구조를 기능에 따라 나눠서 이해하기 쉽도록 설명한 것 

따라서 네트워크 계층이 4계층이든 7계층이든 정해진것은 없다. 













---




> 출처 
> [[10분 테코톡] 🔮 히히의 OSI 7 Layer](https://youtu.be/1pfTxp25MA8)



---

## 220413 스터디



7계층 추상화 이유: 

문제가 생기면 문제가 생긴 부분만 보기 위해서 

1레이어: 

피지컬 레이어, 전기 신호 계층 (신경 ㄴㄴ)

2레이어:

데이터링크 레이어, 맥주소

통신을 할때 컴퓨터간 네트워크 레이어에서 특정 목표까지 라우팅을 한다. 

데이터링크 레이어에서는 다음 목표한테 보내는 것밖에 신경을 안쓴다. 



3레이어: 

네트워크 레이어, 특정 주소까지 라우팅, 



4레이어:

흐름을 관장, 

데이터 통신의 흐름을 관장하는데 데이터가 너무 몰리면 흐름 제어 역할, 그리고 tahoe 

TCP가 있고 흐름제어, 오류제어, 혼잡제어등을 함 



---



1,2 하드웨어가 관장

3,4 OS 관장을 하니까 



---

![KakaoTalk_Photo_2022-04-13-22-18-59](/Users/superyodi/Downloads/KakaoTalk_Photo_2022-04-13-22-18-59.png)



+ 패킷
  + 네트워크 전송의 용량 단위
  + 







기기 상황에 따라서 계층이 있는 레벨이 다름

스위치는 기기가 연결되어있는지 알아야하니까 link부분까지만 오픈

라우터는 



4계층:세그먼트

3계층:패킷

2계층: 프레임



> 참고자료
>
> https://velog.io/@hidaehyunlee/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%84%B8%EA%B7%B8%EB%A8%BC%ED%8A%B8-%ED%8C%A8%ED%82%B7-%ED%97%B7%EA%B0%88%EB%A6%B4-%EB%95%90-PDU%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90



---

세그먼트라는 집합 안에 데이터 계층이 들어가 있음 

tcp에 있는 거를 몇개 빼서 udp를 만듦 

-> 왜 udp를 데이터 그램이라고 하는 거임? 



